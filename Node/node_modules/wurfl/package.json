{
  "name": "wurfl",
  "author": {
    "name": "Jacob Wright",
    "email": "jacwright@gmail.com",
    "url": "jacwright.com"
  },
  "version": "0.3.1",
  "main": "./lib/wurfl",
  "description": "NodeJS library for loading Wireless Universal Resource File (wurfl) xml file efficiently into memory for use in applications that need to lookup mobile device capabilities by their user agent.",
  "scripts": {
    "test": "node test/test.js"
  },
  "dependencies": {
    "node-expat": "2.0.0",
    "backgrounder": "0.2.7"
  },
  "homepage": "https://github.com/touchads/node-wurfl-api",
  "repository": {
    "type": "git",
    "url": "git://github.com/touchads/node-wurfl-api.git"
  },
  "readme": "wurfl.js\n========\n\nwurfl.js is a node.js library to make it easy to use wurfl. What is wurfl? From the site http://wurfl.sourceforge.net/:\n\n```\nWURFL is a Device Description Repository (DDR), i.e. a software\ncomponent which contains the descriptions of thousands of mobile\ndevices. In its simplest incarnation, WURFL is an XML\nconfiguration file plus a set of programming APIs to access the\ndata in real-time environments.\n```\n\nUsage\n-----\n\n### Installation\n\nInstall node.js (http://nodejs.org) first, then npm (http://npmjs.org), then:\n\n```bash\nnpm install wurfl\n```\n\n### Usage\n\nBasic usage allows getting up and running quickly.\n\n```javascript\nvar wurfl = require('wurfl');\n\nwurfl.loadSync();\n\n// wurfl xml file is finished loading into a memory-efficient structure\n\nvar userAgent = 'Mozilla/4.0 (compatible; MSIE 4.01; Windows CE; O2 Xda 2s;PPC;240x320; PPC; 240x320)';\nvar deviceInfo = wurfl.get(userAgent);\nconsole.log(deviceInfo.product_info.model_name); // \"Xda IIs\"\n```\n\nYou may want to use your own (read \"updated\") wurfl.xml file. This is easy:\n\n```javascript\nvar wurflFile = __dirname + '/wurfl.xml';\nwurfl.loadSync(wurflFile);\n```\n\nLoading and parsing a large xml file can be take awhile and be CPU-heavy. You may use load() to asynchronously load the xml file:\n\n```javascript\nwurfl.load(function() {\n\t// ready to use, wurfl.get(userAgent);\n});\n```\n\nOr with your own xml file:\n\n```javascript\nwurfl.load(myWurflFile, function() {\n\t// my own file\n});\n```\n\nWhen using your own file, it would be great to update the file without needing to restart the node.js server:\n\n```javascript\nwurfl.watch(myWurflFile);\n```\n\nWhen updating using watch it will always be asynchronous. The data structure will be updated automatically when the file is changed. You may also be notified when that happens if you want to know when it gets updated:\n\n```javascript\nwurfl.watch(myWurflFile, function() {\n\tconsole.log('XML file updated');\n});\n```\n\nIf you want to reduce memory usage even further, you can specify the the groups you are interested in, the rest will be left out completely. For example, if you only care about the \"display\" capabilities:\n\n```javascript\nwurfl.loadSync({ groups: [ 'display' ] });\n```\n\nWhen specifying groups the \"file\" parameter needs to be an options hash with `groups` and optionally `file`. You can use this in loadSync(options), load(options, callback), and watch(options, callback).\n\n```javascript\nvar options = { file: __dirname + '/wurfl.xml', groups: [ 'display' ] };\nwurfl.loadSync(options);\nwurfl.watch(options);\n```\n\nThe most common use-case is to load the file up when your script starts synchronously since you need it to exist before you start querying against it, but then add a watch to asynchronously update it later:\n\n```javascript\nvar wurfl = require('wurfl');\nvar wurflFile = __dirname + '/wurfl.xml';\n\nwurfl.loadSync(wurflFile);\nwurfl.watch(myWurflFile);\n\nvar userAgent = 'Mozilla/4.0 (compatible; MSIE 4.01; Windows CE; O2 Xda 2s;PPC;240x320; PPC; 240x320)';\nvar deviceInfo = wurfl.get(userAgent);\nconsole.log(deviceInfo.model_name); // \"Xda IIs\"\n```\n\nThat's all for the API:\n\n*  wurfl.loadSync(optFileName)\n*  wurfl.load(optFileName, optCallback)\n*  wurfl.watch(optFileName, optCallback)\n*  wurfl.get(userAgent)\n\nTo see what properties are available in the info object you get back from wurfl.get() look at the wurfl.xml file. Each group is an object on info (e.g. info.css is a group) and each capability is a property on the group (e.g. info.css.css_spriting is a capability).\n\n### Optimizations\n\nThe devices in the wurfl.xml file \"inherit\" from other devices, specified in the XML by the fall_back attribute. In order to optimize for memory and not duplicate the base properties over and over again for every single device, I've structured the groups to have their own class that extends the fall_back group class. I've set all the capabilites for a group on its prototype object. And for groups that weren't overridden, the device just points to its fall_back device's group. This way, when you access a group's capability it will pull it from the group's prototype object or from further up the prototype chain back to the top-level group instance.\n\nIn addition to optimizing for memory I've also added a worker using node-webworkers to load and parse the XML file in a separate process from the main script. This allows the wurfl data to be loaded and/or updated without blocking a large chunk of time from your main script. This can be up to several seconds to load and parse the XML file. The worker is lazily created however, so if you only use loadSync() and get() it won't create the worker.\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/touchads/node-wurfl-api/issues"
  },
  "_id": "wurfl@0.3.1",
  "dist": {
    "shasum": "5f439d50c17ce78794b3e5bcd76323c56a754545"
  },
  "_from": "wurfl@",
  "_resolved": "https://registry.npmjs.org/wurfl/-/wurfl-0.3.1.tgz"
}
